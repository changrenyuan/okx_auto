# OKX 高频量化交易系统

> 🚀 专业级高频交易系统，两种模式可选
> 
> **模式1**：传统量化策略（爆仓单捕猎、资金费率套利、做市商）
> 
> **模式2**：赌徒猎手系统（针对赌徒行为的微观策略）

---

## 📋 目录

- [系统模式](#系统模式)
- [赌徒猎手系统](#赌徒猎手系统)
- [传统量化系统](#传统量化系统)
- [核心策略](#核心策略)
- [系统架构](#系统架构)
- [快速开始](#快速开始)
- [技术架构](#技术架构)
- [免责声明](#免责声明)

---

## 🎯 系统模式

本系统提供两种运行模式，适应不同需求：

### 模式1：传统量化系统 (`main.py`)
- 爆仓单捕猎（基于价格下跌和成交量暴增）
- 资金费率套利（现货+合约对冲）
- 做市商策略（买卖盘挂单赚取点差）

### 模式2：赌徒猎手系统 (`gambler_hunter.py`) ⭐
- **猎杀止损单**：在整数位插针时反向交易
- **冰山委托识别**：识别隐藏大单，在赌徒撞墙时反向交易
- **资金费率秒杀**：在结算前快速套利
- **订单流分析**：实时分析买卖压力
- **本地 OrderBook**：微秒级延迟的深度数据

---

## 🎲 赌徒猎手系统

### 核心理念

**不要预测市场，要识别赌徒行为**

赌徒的特征：
- ❌ 急躁：市价冲入
- ❌ 不懂数学：不看概率
- ❌ 情绪化：追涨杀跌
- ❌ 止损明显：设置在整数位

我们的优势：
- ✅ 微观视野：看订单流，不看K线
- ✅ 极速响应：比人类快1000倍
- ✅ 冷血无情：不情绪化
- ✅ 数据驱动：基于数学和概率

---

### 三大猎杀策略

#### 1. 猎杀止损单 (Stop Loss Hunting)

**原理**：
- 赌徒喜欢在整数位（90000、90500）设置止损
- 当价格接近整数位时，会触发连锁止损
- 我们预判插针，提前挂单接货
- 价格反弹后秒出

**代码逻辑**：
```python
1. 监控价格距离整数位的距离（< 0.2%）
2. 检查盘口是否薄弱
3. 预判插针，在整数位挂限价单
4. 价格反弹 0.5% 后平仓
```

**风险**：
- 插针失败，止损

**收益**：
- 单次 0.5-1%，秒级持有

---

#### 2. 冰山委托识别 (Iceberg Detection)

**原理**：
- 机构使用冰山委托隐藏大单
- 当赌徒疯狂买入时，冰山单不断被消耗但价格不变
- 识别出冰山单后，在赌徒无法突破时反向开仓

**代码逻辑**：
```python
1. 监控每个价位的成交消耗
2. 如果某价位被大量消耗（> 5倍可见量）但价格不变
3. 识别为冰山委托
4. 检测价格停滞
5. 生成反向信号
```

**特征**：
- 某价位被吃掉 5 BTC，但卖一仍然显示 0.1 BTC
- 价格在极小区间震荡，尽管成交量巨大

**风险**：
- 假阳性（非冰山）

**收益**：
- 单次 1-3%，分钟级持有

---

#### 3. 资金费率秒杀 (Funding Scalping)

**原理**：
- 赌徒为了开高杠杆，不惜支付高额资金费率
- 资金费率每 8 小时结算一次
- 在结算前最后几分钟，我们进行快速套利

**代码逻辑**：
```python
1. 监控资金费率（> 0.05%）
2. 检查距离结算时间（< 2分钟）
3. 开仓（做多收取正费率，做空收取负费率）
4. 结算后平仓
```

**收益**：
- 单次 0.05-0.1%，无方向风险
- 每日 3 次机会

---

### 订单流分析

我们不看 K 线，我们看：

#### 1. Tick 级成交数据
- 每一笔成交的**方向、价格、数量**
- 识别主动买入/主动卖出
- 计算瞬时买卖压力

#### 2. 本地 OrderBook 镜像
- 400档深度数据本地维护
- 增量更新（books-l2-tbt）
- 微秒级查询延迟
- 识别冰山委托

#### 3. 买卖压力指标
```python
- 买盘比例：买量 / (买量 + 卖量)
- 净流入：买量 - 卖量
- FOMO 分数：综合成交量、不平衡、频率
- 价格停滞检测：标准差 < 0.01%
```

---

## 📊 传统量化系统

### 核心策略

#### 1. 爆仓单捕猎
监控价格快速下跌（>0.5%）和成交量暴增（>3倍），检测散户爆仓信号，反向做多。

#### 2. 资金费率套利
现货买入 + 合约做空，赚取资金费率差。无风险套利，每日 3 次。

#### 3. 做市商策略
在买一和卖一同时挂单，赚取点差。动态调整价格，管理库存风险。

---

## 🏗️ 系统架构

### 赌徒猎手架构

```
┌──────────────────────────────────────────────────┐
│          GamblerHunter (主程序)                  │
└────────────┬─────────────────────────────────────┘
             │
    ┌────────┴─────────────────┐
    │                          │
┌───▼────────┐      ┌─────────▼─────┐
│WebSocket   │      │   Strategies   │
│Streamer    │◄─────│ (赌徒猎杀)    │
└───┬────────┘      └───────┬───────┘
    │                       │
┌───▼────────┐      ┌───────▼───────┐
│OrderBook   │      │ OrderFlow     │
│ (本地镜像) │      │ Analyzer      │
└───┬────────┘      └───────┬───────┘
    │                       │
┌───▼───────────────────────▼─────┐
│    Risk Manager                │
│    (风险管理)                   │
└───────────┬─────────────────────┘
            │
    ┌───────▼───────┐
    │   Execution   │
    │   Engine      │
    │(FOK/IOC订单)  │
    └───────────────┘
```

### 数据流

```
WebSocket 推送
    ↓
本地 OrderBook 维护 (微秒级)
    ↓
订单流分析 (实时计算)
    ↓
策略引擎 (识别赌徒行为)
    ↓
风险管理 (检查限制)
    ↓
执行引擎 (快速成交)
```

---

## 🚀 快速开始

### 1. 环境要求

- Python 3.10+
- pip

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

### 3. 配置 API 密钥

```bash
# 复制配置文件
cp .env.example .env

# 编辑 .env 文件，填入你的 OKX API 密钥
nano .env
```

在 `.env` 文件中填入：

```env
OKX_API_KEY=your-api-key-here
OKX_SECRET_KEY=your-secret-key-here
OKX_PASSPHRASE=your-passphrase-here
```

### 4. 启动系统

#### 方式1：使用启动脚本（推荐）

```bash
chmod +x start.sh
./start.sh
```

选择启动模式：
- 1: 传统量化系统
- 2: 赌徒猎手系统

#### 方式2：直接运行

```bash
# 赌徒猎手系统（推荐）
python gambler_hunter.py

# 传统量化系统
python main.py
```

---

## 🛡️ 风险控制

### 赌徒猎手系统

- 日亏损熔断（5%）
- 杠杆限制（20x）
- 每笔风险 < 0.1%
- 快速止损（0.5%）
- 紧急停机

### 传统量化系统

- 日亏损熔断（5%）
- 杠杆限制（20x）
- 凯利公式仓位优化
- 实时监控

---

## 🔧 技术架构

### 核心技术

- **异步 I/O**: asyncio, aiohttp
- **WebSocket**: websockets, 增量深度
- **本地 OrderBook**: 堆结构，微秒级查询
- **订单流分析**: 实时压力计算
- **数据分析**: numpy, pandas

### 性能指标

- 延迟：< 1ms（本地决策）
- 订单类型：FOK/IOC（快速成交）
- 持仓时间：秒级-分钟级
- 数据更新：实时推送

---

## 📈 策略对比

| 特性 | 赌徒猎手系统 | 传统量化系统 |
|------|-------------|-------------|
| 数据源 | Tick 级成交、本地 OrderBook | K 线、深度 |
| 持仓时间 | 秒级 | 分钟-小时级 |
| 收益率 | 单次 0.5-3% | 单次 0.1-1% |
| 风险 | 较高（快速止损） | 中等（凯利公式） |
| 适合人群 | 高频交易者 | 稳健投资者 |
| 技术要求 | 高（需要低延迟） | 中等 |

---

## ⚠️ 重要提示

### 赌徒猎手系统

1. **高风险**：秒级交易，需要极快反应
2. **严格止损**：每次止损 0.1%
3. **小额测试**：先在模拟环境测试
4. **实时监控**：保持系统运行
5. **网络延迟**：需要稳定的网络连接

### 通用建议

1. **先测试后实盘**：建议先在模拟环境测试
2. **小额开始**：实盘从小额开始
3. **风险控制**：严格遵守风险控制规则
4. **持续监控**：保持系统运行
5. **定期检查**：定期查看日志

---

## 📞 技术支持

- 问题反馈：GitHub Issues
- 技术讨论：Discussions

---

## 📄 免责声明

本系统仅供学习和研究使用。使用本系统进行交易产生的任何损失，作者不承担任何责任。

量化交易存在极高风险，可能导致本金全部损失。赌徒猎手系统更是高风险策略，请充分了解风险后谨慎使用。

---

## 📜 许可证

MIT License

---

**警告**：赌徒猎手系统是高风险策略，可能造成快速亏损。请仅在充分理解风险的情况下使用！
# okx_auto
# okx_auto
